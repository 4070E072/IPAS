# Layer-1:Physical layer(實體層)
## 實體層確保原始的資料可在各種物理媒體上傳輸，它用來定義網路裝置之間的位元資料傳輸，也就是在電線或其他物理線材上，傳遞0與1電子訊號，形成網路

### 硬體: 集線器（Hub）、網路線、網路卡

#### 攻擊
```
      攻擊方式:
              1.搭接線路(網路與電話)進行訊號竊聽
              2.私接線路變成隱匿通道(非控管中的線路)
      防護建議:
              1.機房、機櫃、線路室及管道間進行存取控管
              2.採用不同顏色區隔不同網段(安全區域)
              3.定期的線路盤查
```
# Layer-2:Data link layer(資料連結層)
## 資料連結層介於實體層與網路層之間，主要是在網路之間建立邏輯連結，並且在傳輸過程中處理流量控制及錯誤偵測，讓資料傳送與接收更穩定
## 功能: 負責網路尋址、錯誤偵測和改錯
### TCP/IP:（Asynchronous Transfer Mode，ATM）、點對點協定（Point-to-Point Protocol，PPP）
### 硬體: 網路交換器(Switch)

#### 攻擊
```
一.
    攻擊手法:
       透過工具或軟體被動蒐集Collision Domain中的網路封包
  
      監聽工具:
              1.Sniffer
              2.MailSnarf
              3.URLSnarf
              4.WebSpy
              5.Tcpdump
              6.Windump
              7.Wireshark(Ethereal)
              8.Ettercap
              9.NetIntercept

      防護建議:
              1.採用加密連線(最佳方法)
              2.改用Switch
              3.網路線路的實體存取控制，避免搭接或私接問題
二.
    ARP Spoofing
      是指攻擊者取得區域網路上的資料封包甚至篡改封包，可讓網路上特定電腦或所有電腦無法正常連線

              -又稱為ARP flooding、ARP poisoning或ARP Poison Routing
              -在Broadcast Domain下無法被動監聽其他電腦間連線封包
              -ARP Spoofing攻擊強迫偽冒其他IP，讓攻擊者有機會監測到其他電腦間的通訊
        
      攻擊手法:
              1.攻擊者使用ARP Broadcast封包告訴其他電腦，192.168.1.1的MAC是Attacker的MAC
              2其他電腦要傳送給192.168.1.1的封包會被送到Attacker
              3.Attacker將封包錄下後轉送到真正的192.168.1.1
 
      防護建議:
              1.強制使用靜態ARP Table(小型網路)
              2.採用VLAN縮小Broadcast Domain的範圍
              3.啟用Switch中的Port、MAC及IP的對應控管
-----------------------------------------------------------------------------------------------------------
與ARP Spoofing 相似的攻擊-IP Spoofing
  
  IP Spoofing:使用偽造的來源位址來傳送IP封包，可能會採用受信任來源的IP 位址來嘗試規避防火牆
```
# Layer-3:network layer(網路層)
## 網路層定義網路路由及定址功能，讓資料能夠在網路間傳遞
## 功能: 決定資料的路徑選擇和轉寄
### TCP/IP: IP
### 硬體: 路由器(Router)、非對稱數位用戶線路路(ADSL)

#### 攻擊
```
一.
    Source Route
      
      攻擊手法:
              1.IP封包的路由通常是由Router所決定，啟用Source Route可以讓傳送者指定IP封包的傳送路徑
              2.攻擊者運用Source Route的功能進行來源IP的偽冒(IP Spoofing)
              3.讓偽冒來源IP的封包可照指定路徑送到目的伺服器
              4.FW信任偽冒的來源IP未加以阻擋
     
      防護建議:
              1.在防火牆或路由器上阻擋採用Source Route的封包
二.
    Smurf Attack
      藉由Ping封包塞爆受害者網路頻寬的阻斷服務攻擊
      
      攻擊手法:
              1.攻擊者偽冒受害者IP發送大量回應請求(Echo Request)給B網段的廣播(Broadcast)IP位址 (B.255或B.0)  
                -> B網段所有電腦收到回應請求(Echo Request)封包，都回覆(Echo Reply)封包給Victim
                -> 導致Victim端頻寬被大量的回復(Echo Reply)封包所占用
                
      防護建議:
              1.在防火牆或路由器上阻擋Network/Broadcast IP的傳送

三.
    Ping of Death
      
      屬於一種阻斷服務攻擊，產生1個超過IP協定能容忍的封包數，若系統沒有檢查機制，就會當機
      
      攻擊手法:
              1.一般正常的Ping封包大小為56位元(含IP標頭為84位元)
              2.攻擊者故意傳送一個大小超過65536位元的Ping封包給受害者(IP協定允許封包大於65536)
              3.受害作業系統無法處理大於65536位元的Ping封包，導致系統當機或重新開機
              4.攻擊者的來源IP經常是偽冒的IP位址
      防護建議:
              1.修補作業系統弱點(目前大部份作業系統都已修補這個弱點)
```
# Layer-4:Transport layer(傳輸層)
## 傳輸層主要負責電腦整體的資料傳輸及控制，它可以將一個較大的資料切割成多個適合傳輸的資料，替模型頂端的第五、六、七等三個通訊層提供流量管制及錯誤控制
## 功能: 把傳輸表頭（TH）加至資料以形成資料包
### TCP/IP: TCP{具有三向交握(Three-way Handshake)安全速度較慢}、UDP(不安全速度較快)

#### 攻擊
```
一.
    SYN Flood
     
      攻擊手法:
              1.攻擊者傳送大量的TCP SYN請求封包到受害伺服器
              2.受害伺服器為每一個連線請求分配系統記憶體資源，導致系統連線資源被耗用殆盡，正常的連線無法建立
              3.大量惡意的TCP SYN封包，其來源IP通常也都是偽冒的，因此無法以封鎖來源IP阻擋攻擊
      防護建議:
              1.防火牆限制同來源IP的連線數量
              2.請求ISP協助
二.
    分散式阻斷服務攻擊Distributed Denial-of-Service，簡稱DDoS)
      
      攻擊手法:
              1.攻擊者控制多部阻斷服務攻擊主機(DoS Agent)，對受害者發動大規模的阻斷服務攻擊
               被攻擊的受害者為主要受害者，被控制的阻斷服務攻擊主機本身也是次要的受害者
               其攻擊來源IP太多(數百至數千個)，通常很難透過防火牆封鎖來源IP
      防護建議:
              1.防火牆限制同一來源IP的連線數量
              2.請求ISP協助
三.
    會話劫持（Session hijacking）
      
      當合法使用者建立連線後，攻擊者從中攔截或取代該連線
      
      可分為兩種類型:
                    1.主動型：攻擊者取代已建立之有效的連線
                    2.被動型：攻擊者攔截連線後只監聽連線內容
      
      攻擊手法:
              1.追蹤連線過程 -> 連線去同步化 -> 注入攻擊者的封包
              
      防護建議:
              1.採用IPSec或SSL雙向認證的加密連線        
```
# Layer-5:session layer(會議層)
## 這個層級負責建立網路連線，等到資料傳輸結束時，再將連線中斷，運作過程有點像召集多人開會（建立連線），然後彼此之間意見交換（資料傳輸），完成後，宣布散會（中斷連線）
## 功能: 負責在資料傳輸中設定和維護電腦網路中兩台電腦之間的通訊連接
### TCP/IP: NetBIOS names、網路芳鄰(TCP 445)


# Layer-6:Presentation layer(表現層)
## 應用層收到的資料後，透過展示層可轉換表達方式，例如將ASCII編碼轉成應用層可以使用的資料，或是處理圖片及其他多媒體檔案，如JPGE圖片檔或MIDI音效檔
## 把資料轉換為能與接收者的系統格式相容並適合傳輸的格式
## 功能: 轉檔 加密 解密


# Layer-7:Application layer(應用層)
## 應用層主要功能是處理應用程式，進而提供使用者網路應用服務

### 不安全的協定:telnet(23) ftp(20/21) http(80) DNS(53)
### 安全的協定:ssh(22) sftp(22?) https(443) DNSsec(53)

#### 攻擊
```
一.
    DNS Poisoning
      攻擊手法:
              1.攻擊者藉由DNS伺服器的弱點，將錯誤的名稱解析植入DNS伺服器的快取區(Cache)中，導致DNS用戶端解析到錯誤的IP，使網路連線被導到惡意的伺服器
            
      防護建議:
              1.修補已知的DNS伺服器弱點
              2.區隔外部與內部DNS伺服器(不要forward到ISP的DNS)
二.    
    Brute force Login
      攻擊手法:
              1.攻擊者透過通行碼猜測入侵應用系統的狀況相當常見
                例如:
                    TELNET login
                    SSH login
                    FTP login
                    SMTP AUTH
                    POP3 login
              2.網路上有相當多的工具可自動進行通行碼猜測攻擊
                例如:
                    Brutus
                    THC-Hydra

      建議防護:
              1.限制同一帳戶連續簽入失敗之次數，若超過次數則延遲簽入一段時間或關閉帳號，發出警告訊息
              2.強制使用者通行碼長度與複雜度
              3.定期更換通行碼

三.
    SQL Injection
    
      攻擊手法:
              1.攻擊者可以將惡意之SQL指令插入程式碼的SQL指令中
              2.Blind SQL Injection：SQL指令注入後只回傳某些狀態，無法得知資料內容
              3.SQL指令注入的弱點發生在Web應用程式中，但受到損害的卻是其後端的資料庫
      
      可能的損壞:
              1.資料庫之資料外洩
              2.資料庫內容被修改
              3.執行資料庫管理
              4.網站權限跳脫或植入後門程式
              
      弱點原理:
              1.Web應用程式將「不可信任來源」的資訊直接組合成SQL指令後執行，就會產生SQL指令注入弱點

      防護建議:
              1.網站應用程式源碼檢測與資料輸出至資料庫前過濾SQL指令使用之特殊符號(例如：單引號與分號等)或採參數化查詢語句
              
四.
    Cross-Site Scripting
    
      簡稱XSS

      攻擊手法:
              1.攻擊者可透過XSS弱點將惡意腳本(例如：JavaScript與VBScript)置入Web伺服器
              2.當其他使用者瀏覽到被置入惡意腳本的網頁時，使其瀏覽器執行惡意腳本
-----------------------------------------------------------------------------------------------------------             
              可區分為儲存型(Stored XSS)與反應型(Reflected XSS)兩類
-----------------------------------------------------------------------------------------------------------
      可能的損壞:
               1.機密資訊被竊取(例如：Cookie與Session ID等)
               2.下載後門程式植入偽冒資訊
      
      弱點原理:
               1.Web應用程式將「不可信任來源」的資訊直接輸出至網頁或其他輸出標的就會產生XSS弱點
     
      防護建議:
               1.網站應用程式源碼檢測與資料輸出時做HTML特殊符號的過濾

      
```
