# OWASP top 10
## OWASP（The Open Web Application Security Project ，開放網路應用程式安全專案）
------------------------------------------------------------------------------
# 1.Injection(注入)
  
## 網站應用程式執行來自外部包括資料庫在內的惡意指令，SQL Injection與Command Injection等攻擊包括在內。因為駭客必須猜測管理者所撰寫的方式，因此又稱「駭客的填空遊戲」。

## 將不受信任的數據作為命令或查詢的一部分發送到解析器時，會產生諸如SQL註入、NoSQL註入、OS註入和LDAP註入的註入缺陷。攻擊者的惡意數據可以誘使解析器在沒有適當授權的情況下執行非預期命令或訪問數據。
 
  舉例來說，原本管理者設計的登入頁面資料庫語法如下： 
 ```
  $str = "SELECT * FROM Users WHERE Username='“.$user."' and Password=‘”.$pass."'“; 
 ```
　如果說$user以及$pass變數沒有做保護，駭客只要輸入「’ or ‘‘=’」字串，就會變成以下： 
 ```
  $str = “SELECT * FROM Users WHERE Username='' or ''='' and Password= '' or ‘’=‘’”; 
 ```
  如此一來，這個SQL語法就會規避驗證手續，直接顯示資料。 
 
   簡述駭客攻擊流程：

        1.找出未保護變數，作為注入點
        2.猜測完整Command並嘗試插入
        3.推測欄位數、Table名稱、SQL版本等資訊
        4.完整插入完成攻擊程序 
　
   防護建議：

        1.使用Prepared Statements，例如Java PreparedStatement()，.NET SqlCommand(), OleDbCommand()，PHP PDO bindParam()
        2.使用Stored Procedures
        3.嚴密的檢查所有輸入值
        4.使用過濾字串函數過濾非法的字元，例如mysql_real_escape_string、addslashes
        5.控管錯誤訊息只有管理者可以閱讀
        6.控管資料庫及網站使用者帳號權限為何
----------------------------------------------------------------------------------------------------------------------
SQL injection

string 
union 
這兩個是SQL語法中的進階語法
----------------------------------------------------------------------------------------------------------------------
# 2. Broken Authentication（身分驗證功能缺失） 
 
## 網站應用程式中自行撰寫的身分驗證相關功能有缺陷。例如，登入時無加密、SESSION無控管、Cookie未保護、密碼強度過弱等等。
## 通常，通過錯誤使用應用程序的身份認證和會話管理功能，攻擊者能夠破譯密碼、密鑰或會話令牌，或者利用其它開發缺陷來暫時性或永久性冒充其他用戶的身份。
 
　例如：  
 ```
　應用程式SESSION Timeout沒有設定。使用者在使用公用電腦登入後卻沒有登出，只是關閉視窗。攻擊者在經過一段時間之後使用同一台電腦，卻可以直接登入。 
 
　網站並沒有使用SSL / TLS加密，使用者在使用一般網路或者無線網路時，被攻擊者使用Sniffer竊聽取得User ID、密碼、SESSION ID等，進一步登入該帳號。
 
　這些都是身分驗證功能缺失的例子。 
 ```
　管理者必須做以下的檢查：
```
    1.所有的密碼、Session ID、以及其他資訊都有透過加密傳輸嗎？
    2.憑證都有經過加密或hash保護嗎？
    3.驗證資訊能被猜測到或被其他弱點修改嗎？
    4.Session ID是否在URL中暴露出來？
    5.Session ID是否有Timeout機制？
```    
  防護建議：

    1.使用完善的COOKIE / SESSION保護機制
    2.不允許外部SESSION
    3.登入及修改資訊頁面使用SSL加密
    4.設定完善的Timeout機制
    5.驗證密碼強度及密碼更換機制 

# 3.Sensitive Data Exposure 敏感資料外漏
## 許多 Web 應用系統和 API 都無法正確保護敏感資訊
## 許多Web應用程序和API都無法正確保護敏感數據，例如：財務數據、醫療數據和PII數據。攻擊者可以通過竊取或修改未加密的數據來實施信用卡詐騙、身份盜竊或其他犯罪行為。未加密的敏感數據容易受到破壞，因此，我們需要對敏感數據加密，這些數據包括：傳輸過程中的數據、存儲的數據以及瀏覽器的交互數據。

  例如:
```
    1.財務資料、醫療資料和個人資料等。
    2.攻擊者可透過竊取或修改未加密數據，實施信用卡詐騙、身份盜取或其他犯罪行為。
    3.未加密的敏感資料容易受到破壞，因此，使用者需要對敏感資料加密，包括傳輸過程中的資料、儲存的資料及瀏覽器的交換資料。
```

# 4.XML External Entities (XXE) XML外部處理器漏洞
## 許多早期或設定錯誤的 XML 處理器，沒做好相關權限保護，造成機密資料外洩風險產生。
## 許多較早的或配置錯誤的XML處理器評估了XML文件中的外部實體引用。攻擊者可以利用外部實體竊取使用URI文件處理器的內部文件和共享文件、監聽內部掃描端口、執行遠程代碼和實施拒絕服務攻擊。

```
  攻擊者可利用以 XML 為基礎的應用程式或網路服務，竊取使用 URL 呼叫的內部文件、共享文件和掃描連接埠，藉此監聽內部網路、執行遠端程式和實施 DDoS 攻擊。
```
# 5.Broken Access Control  無效存取控管 
## 合併易混淆的 A4 Insecure Direct Object Reference 及 A7 Broken Authentication and Session Management 為無效的存取控管。
## 未對通過身份驗證的用戶實施恰當的訪問控制。攻擊者可以利用這些缺陷訪問未經授權的功能或數據，例如：訪問其他用戶的帳戶、查看敏感文件、修改其他用戶的數據、更改訪問權限等。

```
  建議處理檔案或敏感性資料時，需嚴格進行監控及身份權限驗證，降低駭客利用漏洞存取未經驗證或授權的功能察看敏感資料、修改數據和提升存取權限等。
```

# 6.Security Misconfiguration（安全性設定疏失） 
 
## 系統的安全性取決於應用程式、伺服器、平台的設定。因此所有設定值必須確保安全，避免預設帳號、密碼、路徑等。甚至被Google Hacking直接取得攻擊弱點。
## 安全配置錯誤是最常見的安全問題，這通常是由於不安全的默認配置、不完整的臨時配置、開源雲存儲、錯誤的 HTTP 標頭配置以及包含敏感信息的詳細錯誤信息所造成的。因此，我們不僅需要對所有的操作系統、框架、庫和應用程序進行安全配置，而且必須及時修補和升級它們。

  防護建議：
```
    1.軟體、作業系統是否都有更新到最新版本？是否都有上最新Patch?
    2.不需要的帳號、頁面、服務、連接埠是否都有關閉？
    3.預設密碼是否都有更改？
    4.安全設定是否都完備？
    5.伺服器是否都有經過防火牆等設備保護？ 
```

# 7.Cross Site Scripting ( XSS )（跨站腳本攻擊） 
 
## 網站應用程式直接將來自使用者的執行請求送回瀏覽器執行，使得攻擊者可擷取使用者的Cookie或Session資料而能假冒直接登入為合法使用者。  
## 當應用程序的新網頁中包含不受信任的、未經恰當驗證或轉義的數據時，或者使用可以創建 HTML或JavaScript 的瀏覽器 API 更新現有的網頁時，就會出現 XSS 缺陷。XSS 讓攻擊者能夠在受害者的瀏覽器中執行腳本，並劫持用戶會話、破壞網站或將用戶重定向到惡意站點。 
```
    1.受害者登入一個網站
    2.從Server端取得Cookie
    3.但是Server端上有著XSS攻擊，使受害者將Cookie回傳至Bad Server
    4.攻擊者從自己架設的Bad Server上取得受害者Cookie
    5.攻擊者取得控制使用受害者的身分
```

# 8.Insecure Deserialization (不安全的反序列化漏洞)
## 該問題主要鎖定 Java、PHP 或 Node.js 等平臺攻擊，造成遠程代碼執行。
## 不安全的反序列化會導致遠程代碼執行。即使反序列化缺陷不會導致遠程代碼執行，攻擊者也可以利用它們來執行攻擊，包括：重播攻擊、註入攻擊和特權升級攻擊。
```
即使反序列化缺陷不會導致遠程代碼執行，攻擊者也能利用它們執行重播攻擊、注入攻擊和特權升級攻擊等。
```

# 9.Using Components with  Known Vulnerabilities (使用已知漏洞元件)
## 組件（例如：庫、框架和其他軟件模塊）擁有和應用程序相同的權限。如果應用程序中含有已知漏洞的組件被攻擊者利用，可能會造成嚴重的數據丟失或服務器接管。同時，使用含有已知漏洞的組件的應用程序和API可能會破壞應用程序防禦、造成各種攻擊並產生嚴重影響。

# 10.Insufﬁcient Logging & Monitoring(記錄與監控不足) 
## 不足的日志記錄和監控，以及事件響應缺失或無效的集成，使攻擊者能夠進一步攻擊系統、保持持續性或轉向更多系統，以及篡改、提取或銷毀數據。大多數缺陷研究顯示，缺陷被檢測出的時間超過200天，且通常通過外部檢測方檢測，而不是通過內部流程或監控檢測。




